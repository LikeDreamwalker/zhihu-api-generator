# zhihu-api-generator

#### Ver 3.00

使用zag生成你的专属API*。

[^*]:需要云服务支持



## 什么是 zhihu-api-generator ？

zhihu-api-generator是多个基于JavaScript DOM的脚本，通过DOM方式将你的知乎创作内容导出为json格式的API文档，其中包括了标题，链接，题图等信息。

## 如何使用zhihu-api-generator？

和其他的JavaScript脚本一样，你需要使用浏览器的调试功能执行这些脚本。

**首先，你需要访问到你的个人主页。**

知乎的个人主页一般为：

*www.zhihu.com/people/你的个人域名*

如果你不清楚你的个人域名，你可以从首页右上角头像处，访问“我的主页”。

**切换到对应脚本内容的选项卡**

zag只能在对应选项卡下工作。

*如果你期望导出其他的内容，请务必仔细阅读注释并修改相关内容*。

**在该选项卡下，通过调试执行脚本，浏览器将会自动下载一个名为*用户名.json*的文件。**

文章：https://github.com/LikeDreamwalker/zhihu-articles-json/blob/master/zhihu.js

回答：亟待更新

专栏：亟待更新

动态：亟待更新

示例：

```json
[
    {
        "headline": "JS中一个简单的合并对象/数组的思路",
        "url": "https://zhuanlan.zhihu.com/p/262282842",
        "dateP": "2020-10-06T15:25:13.000Z",
        "dateM": "2020-10-06T15:25:13.000Z",
        "img": "https://pic4.zhimg.com/v2-8ac0ec7ef990ca579657ae5b8bea714c_r.jpg",
        "text": "前言 本文真的很简单，只是为了方便有需求的人，尽可能少走弯路。 为什么要合并 这是我在重构代码的时候的一个需求。简单来说，我会有若干个对象需要合并为一个对象。而这些对象为两层，如果直接展开或者赋值会涉及到深…",
        "status": false,
        "statusB": true
    },
    {
        "headline": "解决Vue中页面成功渲染数据undefined的问题",
        "url": "https://zhuanlan.zhihu.com/p/260523407",
        "dateP": "2020-09-30T14:30:32.000Z",
        "dateM": "2020-10-03T02:50:54.000Z",
        "img": "https://pic4.zhimg.com/v2-8ac0ec7ef990ca579657ae5b8bea714c_r.jpg",
        "text": "前言 这个标题不太好取。 本文需要下面的知识： 问题描述 我最近的一个功能需求是通过axios获取我存储在COS中的json文件，同时渲染到页面上。 而问题就是，axios可以成功获取数据，组件也可以成功渲染，…",
        "status": false,
        "statusB": true
    },
    {
        "headline": "浅析Vue的生命周期以及JS异步",
        "url": "https://zhuanlan.zhihu.com/p/260811233",
        "dateP": "2020-09-30T13:32:59.000Z",
        "dateM": "2020-10-02T04:03:47.000Z",
        "img": "https://pic4.zhimg.com/v2-8ac0ec7ef990ca579657ae5b8bea714c_r.jpg",
        "text": "前言 Vue的生命周期和JS异步都是有很多文章的知识点，我之前也是一知半解，基本够用。 但是直到我在开发的时候真的遇到了问题，才发现如果不把这些知识点融汇到一起，很难解决实际问题。 我甚至觉得这是我离尤雨溪…",
        "status": false,
        "statusB": true
    },
    {
        "headline": "如何快速调整显示器组的亮度？",
        "url": "https://zhuanlan.zhihu.com/p/259647484",
        "dateP": "2020-09-26T13:35:07.000Z",
        "dateM": "2020-09-26T13:37:24.000Z",
        "img": "https://pic2.zhimg.com/v2-8b58a57ba0923d23329abc16766da34c_r.jpg",
        "text": "前言 Mac的情况我不清楚，但是Windows下调整显示器亮度其实是一个挺烦人的事。 我的显示器组为一个15.6寸的副屏，一个22寸的显示器，一个15.6寸的笔记本屏幕。 由于硬件原因，通过显示器本身调整亮…",
        "status": false,
        "statusB": true
    },
    ...
```

## zhihu-api-generator合法吗？

正如所有的爬虫，API等等内容，请确保你在相关用户协议的规范下使用你获取的内容。

由于zhihu-api-generator使用DOM进行操作，获取的是公开可获取且已经加载在用户端的内容，所以我不认为这会导致违法行为。

但是，请不要将此脚本用于非你创作的内容，也不要将此脚本获取的内容用于商业目的，我不承担由于使用此脚本所造成的一切责任。

## 已知问题 与 版本更新：

Ver 3.00:

**重构代码，现在以更高效的方式运行**

·**[新增]**每个对象加入默认值为false的status属性，加入默认值为true的status属性，便于特殊用途

·**[新增]**现在zag可以捕获到你的所有内容，而不再是当前页的内容* 

[^*]:严格来说，是从当前页递归下去，所以请确认在执行脚本前你已经跳转至第一页

·**[新增]**当脚本执行完毕后，用户可以阅读到更为美观的提示内容

·**[新增]**现在脚本会在执行完毕后提供内容预览

·**[BUG]**受限于网络环境与浏览器性能，你可能会遇到getElementByAttr()为undefined错误而导致脚本崩溃，此种情况发生的原因是当脚本进行页面跳转时浏览器并没有加载出对应的DOM内容。在此版本，已经为回调函数设置了1000ms的延迟以充分加载DOM，如果你依然遇到此问题，请考虑更换浏览器或者网络环境，或者依据注释内容适当增加该数值。过高的数值可能会导致性能下降。

Ver 2.00:

（该版本未发布）

·**[新增]**保存为数组而不是类数组，便于遍历

·**[回调]**不再为对象提供length属性

·调整了执行顺序，在得到用户确认之前不会执行下载操作

Ver 1.20: 

·**[新增]**保存为类数组而不是对象，便于Vue等框架的遍历

·**[新增]**增加了length属性，默认值为文章数

·修改了对象内各个对象的命名方式

Ver 1.10:

·**[新增]**增加了获取预览内容的功能（text）

·增加了了更多提示

Ver 1.00：

·**[BUG]**如果你的题图是.png格式的透明文件，知乎有可能在服务器上同时生成了白底与源文件两个文件，当你通过zhihu-api-generator生成json文件后，仅能访问到前者。如果你的站点使用暗色主题或者夜间模式，有必要考虑使用其他来源的.png文件替换知乎源文件。

